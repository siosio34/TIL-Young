## 안드로이드 성능 최적화 리뷰



- ##### 느린 속도로 동작하는 앱(로딩속도, 스크롤, 다른 사용자 이벤트의 성능) 앱에서 크래시가 나는 경우와 비슷한 비율로 고객을 잃어버림.


- ##### 로딩시간이 4.4초 이상 걸리면 서비스 전환률은 3.5~ 7% 가떨어진다.


- ##### 가장 많은 사용자 불만(순위 별로)

  - 사용자 인터페이스 
  - 성능
  - 기능성
  - 장치 호환성

- ##### 루팅된 기기는 보안 테스트를 할때 도움이 될 수도 있다. 한대 정도는 준비하는게 좋다.

- ##### alarm api를 이용하면 시간을지정해서 특정 작업을 수행하는게 가능.

- ##### batterystats 와 battery Historian 을 사용하면 배터리 사용량이 잘 정리된 보고서 형태인 웹화면으로 볼수 있다.

- ##### JobScheduler

  - wakelock  과 alarm 을 사용하지 않고도 추가작업 가능
  - 기기를 깨우는 작업을 시스템에게 위임.!
  - 이 API를 사용하면 앱의 15~20% 배터리 소모를 줄일수 있음.

- ##### 3~4초안에 페이지 내용이 로딩되지 않으면 사용자의 50% 보던 페이지를 벗어남.

- ##### Jank

  - 프레임 누락으로 인해 화면의 부드럽지 않은 움직임을 쟁크라부름
  - 16ms 마다 안드로이드 화면이 갱신되서 한 프레임은 16ms 안에 렌더링이되어야함.

- ##### 중첩된 뷰를 가질수록 속도가 느리고 소스가 많이듬 - 제약 라이아웃으로 이 문제를 해결

- ##### 계층 구조 뷰어

  - 화면 내의 다양한 뷰에 대한 중첩 동작을 시각화 가능
  - 이것을 통해 각 뷰가 렌더링 되는 시간을 알고 최적화가가능

- ##### 리소스 줄이기

  - 좋아요 표시, 온라인/오프라인 상태 별표/별표 없음 을 하나의 아이콘으로 표시가 가능

    ```java
    public Drawable colorDrawable(Resources res, @DrawableRes int drawableResId, @ColorRes int colorResId) {
      Drawable drawable = res.getDrawable(drawableResId);
      int color = res.getColor(colorResId);
      drawable.setColorFilter(color, PorterDuff.Mode.SRC_IN);
      return drawable;
    }
    ```

    - 하나의 리소스만 가지고 활용함으로써 리소스 로딩을 많이 줄일 수 있음.
    - 인스타 그램의 경우 탭바에서 사용되는 객체를 29개에서 8개로 줄인결과 앱의 초기 구동시간을 29개에서 8개로 줄임.

  - 화면 겹쳐 그리는 오버드로 여부 확인.

  - Systrace 를 사용해서 성능 분석도 가능하다.

- ##### 앱이 로딩될때 진행바를 사용하고 있다면 로딩이 마치는 방향의 반대방으로 애니메이션을 줘라

- ##### 이전 페이지를 유지하거나 빈화면을 보여주는 대신 빠르게 쓸려 올려가는 애니메이션을 사용하여라

- ##### 앱이 갑자기 자주 종료된다면 meminfo 를 사용해서 메모리 누수가 있는지 확인하여라!

- ##### 전체 크기 이미지가 필요없는 경우에는 썸네일을 이용하여라

- ##### 이미지의 부가적인 메타데이터를 다 제거하면 용량을 줄일수도 있다.

- ##### 안드로이드 4.0 이상에서는 app에서 http응답에 대한 캐싱을 킬 수 있다.

  ![](https://ww2.sinaimg.cn/large/006tKfTcgy1fdlp0jonk2j30lw08ewfj.jpg)

- ##### 연결을 다 처리했으면 서버와 기기사이에 연결을 즉시 끊는게 중요하다,

  ![](https://ww3.sinaimg.cn/large/006tKfTcgy1fdlp5330pjj30m808iabb.jpg)


​		

- ##### Crashlytics 로 크래시 보고서를 찾아볼 수도 있다.

- ##### Google Analytics 로 사용자 분석도 가능하다.

​		
​			


​			
​		
​	

​		
​		
​	
​	
​		
​			
​				
​					                     
​                                   
​                   


​			
​		
​	